<!-- TODO: Styles to CSS -->
<!-- TODO: Translations -->
<div class="modal-header" style="background: #EEE">
    <h5 class="modal-title">Confirm which datasets you wish to select</h5>
    <button type="button" class="close" (click)="activeModal.dismiss('Cross click')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body" style="margin-left:10px;margin-right:10px;padding:0px;margin:0px;overflow:auto;">
    <p-treeTable [value]="cswRecordTreeData" selectionMode="checkbox" [(selection)]="selectedDatasetNodes">
        <p-column header="Name" class="text-truncate" [style]="{'width':'40%'}">
            <ng-template let-col let-node="rowData" pTemplate="body">
                <span title="{{ node.data.name }}">{{ node.data.name }}</span>
            </ng-template>
        </p-column>
        <p-column header="URL" class="text-truncate" [style]="{'width':'40%'}">
            <ng-template let-col let-node="rowData" pTemplate="body">
                <a title="{{ node.data.url }}" href="{{ node.data.url }}" target="_blank">{{ node.data.url }}</a>
            </ng-template>
        </p-column>
        <!-- TODO: Estimating size (NCSS) -->
        <!-- TODO: 'Click here to download' download link (WWW) -->
        <p-column header="Download" [style]="{'width':'10%','text-align':'center'}">
            <ng-template let-col let-node="rowData" pTemplate="body">
                <button pButton *ngIf="node.data.leaf" (click)="downloadDataset(node.data.onlineResource, node.data.downloadOptions)"><i class="fa fa-download" title="Download this data to your local machine"></i></button>
                <button pButton *ngIf="node.data.leaf" (click)="editDownload(node.data.onlineResource, node.data.downloadOptions)" title="Edit the download options"><i class="fa fa-edit"></i></button>
            </ng-template>
        </p-column>
    </p-treeTable>
</div>
<div class="modal-footer" style="background: #EEE">
    <button type="button" class="btn btn-secondary" (click)="captureData()" [disabled]="selectedDatasetNodes.length==0">Capture Data</button>
</div>

<!-- Capture data success modal -->
<ng-template #selectedDatasetsOkModal let-c="close">
    <div class="modal-header">
        <h4 class="modal-title">Request Saved</h4>
        <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
            Your {{selectedLeafNodeCount}} dataset(s) have been saved. You can either continue selecting more data or create a job to process your existing selections.
    </div>
    <div class="modal-footer">
        <button type="button" class="btn" (click)="c('OK click')">OK</button>
    </div>
</ng-template>